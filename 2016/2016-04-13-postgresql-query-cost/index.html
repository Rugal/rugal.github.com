

<!DOCTYPE html>
<html lang="en" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/fluid.png">
  <link rel="icon" href="/img/fluid.png">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="Rugal Bernstein">
  <meta name="keywords" content="">
  
    <meta name="description" content="Attributes in Execution plancost&#x3D;0.00..290.45The first cost is the start-up cost of this node. The value here determines how much work is estimated to be done before the node produces its first r">
<meta property="og:type" content="article">
<meta property="og:title" content="PostgreSQL Query Cost">
<meta property="og:url" content="https://rugal.github.com/2016/2016-04-13-postgresql-query-cost/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="Attributes in Execution plancost&#x3D;0.00..290.45The first cost is the start-up cost of this node. The value here determines how much work is estimated to be done before the node produces its first r">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2016-04-13T04:00:00.000Z">
<meta property="article:modified_time" content="2023-11-01T03:44:00.429Z">
<meta property="article:author" content="Rugal Bernstein">
<meta property="article:tag" content="postgresql">
<meta name="twitter:card" content="summary_large_image">
  
  
  
  <title>PostgreSQL Query Cost - Hexo</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"rugal.github.com","root":"/","version":"1.9.5","typing":{"enable":true,"typeSpeed":70,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 6.3.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>Fluid</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>Home</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>Archives</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>Categories</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>Tags</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>About</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/default.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="PostgreSQL Query Cost"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2016-04-13 00:00" pubdate>
          April 13, 2016 am
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          4.3k words
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          36 mins
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">PostgreSQL Query Cost</h1>
            
            
              <div class="markdown-body">
                
                <link rel="stylesheet" type="text&#x2F;css" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.5.1/katex.min.css"><h1 id="Attributes-in-Execution-plan"><a href="#Attributes-in-Execution-plan" class="headerlink" title="Attributes in Execution plan"></a>Attributes in Execution plan</h1><h2 id="cost-0-00-290-45"><a href="#cost-0-00-290-45" class="headerlink" title="cost&#x3D;0.00..290.45"></a>cost&#x3D;0.00..290.45</h2><p>The first cost is the start-up cost of this node. The value here determines how much work is estimated to be done before the node produces its first row of output. Here, the value is zero because a Seq Scan node instantly produces rows.<br>The second estimated cost is the cost of running the entire node until it completes.</p>
<h2 id="rows-3616"><a href="#rows-3616" class="headerlink" title="rows&#x3D;3616"></a>rows&#x3D;3616</h2><p>The number of rows to output if the node runs to completion.  </p>
<h2 id="width-26"><a href="#width-26" class="headerlink" title="width&#x3D;26"></a>width&#x3D;26</h2><p>This value provides an estimate of the average number of bytes each row output for the node will contain.</p>
<h1 id="Forcing-a-plan"><a href="#Forcing-a-plan" class="headerlink" title="Forcing a plan"></a>Forcing a plan</h1><ul>
<li>enable_seqscan</li>
<li>enable_indexscan</li>
<li>enable_sort</li>
<li>enable_nestloop</li>
<li>enable_hashjoin</li>
<li>enable_mergejoin</li>
<li>enable_tidscan</li>
<li>enable_hasagg</li>
</ul>
<h1 id="Operation-Cost"><a href="#Operation-Cost" class="headerlink" title="Operation Cost"></a>Operation Cost</h1><h2 id="Sort-operator"><a href="#Sort-operator" class="headerlink" title="Sort operator"></a>Sort operator</h2><pre><code class="hljs">select oid from pg_proc order by oid;
</code></pre>
<ol>
<li>Explicit: ORDER BY clause</li>
<li>Implicit: Unique and other operators</li>
<li>Has startup cosy: cannot return right away</li>
</ol>
<h2 id="Index-Scan"><a href="#Index-Scan" class="headerlink" title="Index Scan"></a>Index Scan</h2><pre><code class="hljs">select oid from pg_proc where oid=1;
</code></pre>
<p>Lower cost usually makes it preferred, especially on large tables.<br>Get one tuple pointer from index and get corresponding row from table.  </p>
<h2 id="BitMap-Scan"><a href="#BitMap-Scan" class="headerlink" title="BitMap Scan"></a>BitMap Scan</h2><p>A bitmap scan works in two phase. </p>
<ol>
<li>Scan the index to get all matched tuples to form a bitmap in memory before sort it, called bitmap index scan.</li>
<li>Get row by pointers from tables before doing a index recheck, called bitmap heap scan</li>
</ol>
<p>For the first phase, if the bitmap is too big(greater than <code>work_mem</code>) to fit into memory, PostgreSQL will work in a so called <code>lossy</code> mode to build a bitmap that contains only pages that cover those tuple pointers. When get tuple for case like this, PostgreSQL just fetch those matched pages instead of tuples. But this could involve some tuples that do not meet criterion. That is why <code>Index Recheck</code> will be used here.<br>But for query that is not <code>lossy</code>, the <code>Index Recheck</code> will appear even though there is no actual work for it.<br>The <code>Index Recheck</code> is always appear even though the the bitmap is not <code>lossy</code>, and there is no actual work for it.</p>
<h2 id="Result-Operator"><a href="#Result-Operator" class="headerlink" title="Result Operator"></a>Result Operator</h2><pre><code class="hljs">select oid from pg_proc where 1+1=3;
</code></pre>
<ol>
<li>Non­table queries</li>
<li>Inside a WHERE clause (‘true’ vs. ‘false’)</li>
</ol>
<h2 id="Unique-Operator"><a href="#Unique-Operator" class="headerlink" title="Unique Operator"></a>Unique Operator</h2><pre><code class="hljs">select distinct oid from pg_proc;
</code></pre>
<ol>
<li>Removes duplicate values from the input set</li>
<li>Does not change ordering, simply fails to pass on duplicate rows</li>
<li>Incoming set must be ordered (will force a Sort if needed)</li>
<li>Two “cpu operations” per tuple cost</li>
<li>Used with DISTINCT and UNION</li>
</ol>
<h2 id="Limit-Operator"><a href="#Limit-Operator" class="headerlink" title="Limit Operator"></a>Limit Operator</h2><pre><code class="hljs">select oid from pg_proc limit 5;
</code></pre>
<ol>
<li>Rows will be equal to number specified</li>
<li>Can return first row immediately</li>
<li>Also handles offsets, with a small additional startup cost</li>
</ol>
<h2 id="Aggregate-Operator"><a href="#Aggregate-Operator" class="headerlink" title="Aggregate Operator"></a>Aggregate Operator</h2><pre><code class="hljs">select count(*) from pg_proc;
</code></pre>
<ol>
<li>Used with count, sum, min, max, avg, sttdev, variance</li>
<li>You may see differences when GROUP BY is used</li>
</ol>
<h2 id="GroupAggregate-Operator"><a href="#GroupAggregate-Operator" class="headerlink" title="GroupAggregate Operator"></a>GroupAggregate Operator</h2><pre><code class="hljs">select count(*) from pg_bigtable group by oid;
</code></pre>
<p>Used with GROUP BY and some aggregates on larger result sets</p>
<h2 id="Append-Operator"><a href="#Append-Operator" class="headerlink" title="Append Operator"></a>Append Operator</h2><pre><code class="hljs">select oid from pg_proc union all select oid from pg_proc;
</code></pre>
<ol>
<li>Triggered by UNION (ALL), inheritence</li>
<li>No startup cost</li>
<li>Cost is simply the sum of all inputs</li>
</ol>
<h2 id="Nested-Loop-Operator"><a href="#Nested-Loop-Operator" class="headerlink" title="Nested Loop Operator"></a>Nested Loop Operator</h2><pre><code class="hljs">select * 
from pg_bigtable inner join pg_namespace
on (pg_bigtable.pronamespace=pg_namespace.oid);
</code></pre>
<ol>
<li>Joins two tables (two input sets)</li>
<li>USED with INNER JOIN and LEFT OUTER JOIN</li>
<li>Scans ‘outer’ table, finds matches in ‘inner’ table</li>
<li>No startup cost</li>
<li>Can lead to slow queries, especially when functions are in the select clause</li>
</ol>
<h2 id="Merge-Joins"><a href="#Merge-Joins" class="headerlink" title="Merge Joins"></a>Merge Joins</h2><pre><code class="hljs">select relname,nspname 
from pg_class left join pg_namespace 
on (pg_class.relnamespace = pg_namespace.oid);
</code></pre>
<ol>
<li>Joins two sets: outer and an inner</li>
<li>Merge Right Joins, Merge In Joins</li>
<li>Sets must be pre­ordered (sorts), walk through both simultaneously</li>
</ol>
<h2 id="Hash-Hash-Join"><a href="#Hash-Hash-Join" class="headerlink" title="Hash &amp; Hash Join"></a>Hash &amp; Hash Join</h2><pre><code class="hljs">select relname, nspname 
from pg_class join pg_namespace 
on (pg_class.relnamespace=pg_namespace.oid);
</code></pre>
<ol>
<li>Compares two input sets by building hash tables</li>
<li>Used with INNER JOIN</li>
<li>Creating a hash incurs startup cost</li>
<li>Generally more efficient than Nested Loop</li>
</ol>
<h2 id="Hash-Hash-Left-Join"><a href="#Hash-Hash-Left-Join" class="headerlink" title="Hash &amp; Hash Left Join"></a>Hash &amp; Hash Left Join</h2><pre><code class="hljs">select relname, nspname 
from pg_class left join pg_namespace 
on (pg_class.relnamespace=pg_namespace.oid);
</code></pre>
<ol>
<li>Similar to HASH &#x2F; HASH JOIN</li>
<li>Incurs a startup cost</li>
<li>Used with LEFT JOIN</li>
</ol>
<h2 id="Subquery-Scan"><a href="#Subquery-Scan" class="headerlink" title="Subquery Scan"></a>Subquery Scan</h2><pre><code class="hljs">select oid from pg_proc union all select oid from pg_proc;
</code></pre>
<ol>
<li>Used with unions</li>
<li>Generally not a significant problem</li>
</ol>
<h2 id="ctid-Scan"><a href="#ctid-Scan" class="headerlink" title="ctid Scan"></a>ctid Scan</h2><pre><code class="hljs">select oid from pg_proc where ctid = &#39;(0,1)&#39;;
</code></pre>
<ol>
<li>Column tuple ID</li>
<li>Only used when “ctid&#x3D;” appears in your query</li>
<li>Very rare, very fast</li>
</ol>
<h2 id="Materialize-Operator"><a href="#Materialize-Operator" class="headerlink" title="Materialize Operator"></a>Materialize Operator</h2><p>The planner&#x2F;optimizer may decide that it is less expensive to materialize a <code>subselect</code> once than to repeat the work for each top-level row.<br>The Materialize operator is used for some <code>subselect</code> operations.<br>Materialize will also be used for some <code>merge-join</code> operations. In particular, if the inner input set of a Merge Join operator is not produced by a Seq Scan, an Index Scan, a Sort, or a Materialize operator, the planner&#x2F;optimizer will insert a Materialize operator into the plan.</p>
<h2 id="Function-Scan"><a href="#Function-Scan" class="headerlink" title="Function Scan"></a>Function Scan</h2><pre><code class="hljs"> select * from foo(12);
</code></pre>
<ol>
<li>Seen when a function is gathering data</li>
<li>Somewhat mysterious for troubleshooting</li>
<li>Run explain on queries used inside function</li>
</ol>
<h2 id="SetOp-Operators"><a href="#SetOp-Operators" class="headerlink" title="SetOp Operators"></a>SetOp Operators</h2><pre><code class="hljs">select oid from pg_proc INTERSECT select oid from pg_proc;
</code></pre>
<p>Used (obviously) for INTERSECT, INTERSECT ALL, EXCEPT, EXCEPT ALL</p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/operation/" class="category-chain-item">operation</a>
  
  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/postgresql/" class="print-no-link">#postgresql</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>PostgreSQL Query Cost</div>
      <div>https://rugal.github.com/2016/2016-04-13-postgresql-query-cost/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>Author</div>
          <div>Rugal Bernstein</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>Posted on</div>
          <div>April 13, 2016</div>
        </div>
      
      
      
        <div class="license-meta-item">
          <div>Licensed under</div>
          <div>
            
              
              
                <a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by/4.0/">
                  <span class="hint--top hint--rounded" aria-label="BY - Attribution">
                    <i class="iconfont icon-by"></i>
                  </span>
                </a>
              
            
          </div>
        </div>
      
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2016/2016-04-15-postgresql-continuous-archive/" title="PostgreSQL Continuous Archive">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">PostgreSQL Continuous Archive</span>
                        <span class="visible-mobile">Previous</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2016/2016-04-04-java-heap-generation/" title="Java Heap Generation">
                        <span class="hidden-mobile">Java Heap Generation</span>
                        <span class="visible-mobile">Next</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>Table of Contents</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">Search</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">Keyword</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">Blog works best with JavaScript enabled</div>
  </noscript>
</body>
</html>
